var Drawmote=Drawmote||{};Drawmote.Desktop={};
Drawmote.Desktop.init=function(){this.brush=new Drawmote.Brush;Drawmote.Desktop.Socket.init();Drawmote.Desktop.Canvas.init();Drawmote.Desktop.Interface.init();Drawmote.Desktop.Socket.getCode(function(a){$(".setup-code").html(a)});$(window).bind("mobile-connected",Drawmote.Desktop.handleMobileConnected);$(window).bind("orientation-change",Drawmote.Desktop.handleDataChange);$(window).bind("brush-change",Drawmote.Desktop.handleBrushChange);$(window).bind("brush-mode",Drawmote.Desktop.handleBrushModeChange)};
Drawmote.Desktop.handleMobileConnected=function(){Drawmote.Desktop.Interface.prepareDrawView()};Drawmote.Desktop.handleDataChange=function(a,b){Drawmote.Desktop.Data.gyroscope.alpha=b.alpha;Drawmote.Desktop.Data.gyroscope.beta=b.beta};Drawmote.Desktop.handleBrushChange=function(a,b){this.brush=b;Drawmote.Desktop.Interface.setBrush(this.brush)};Drawmote.Desktop.handleBrushModeChange=function(a,b){this.brush.mode=b;Drawmote.Desktop.Interface.setBrushMode(this.brush.mode)};$(document).ready(function(){Drawmote.Desktop.init()});Drawmote=Drawmote||{};Drawmote.Mobile={};Drawmote.Mobile.init=function(){this.brush=new Drawmote.Brush;Drawmote.Mobile.Socket.init();Drawmote.Mobile.Data.init();Drawmote.Mobile.Interface.init()};Drawmote.Mobile.validateCode=function(a){Drawmote.Mobile.Socket.validateCode(a,function(a){"valid"===a?(Drawmote.Mobile.Interface.prepareDrawView(),Drawmote.Mobile.startDataStream()):Drawmote.Mobile.Interface.codeInvalid()})};
Drawmote.Mobile.startDataStream=function(){Drawmote.Mobile.Socket.changeBrush(this.brush);Drawmote.Mobile.Socket.changeBrushMode(this.brush.mode);setInterval(function(){var a=Drawmote.Mobile.Data.getGyroscopeData();Drawmote.Mobile.Socket.sendGyroData(a)},30)};Drawmote.Mobile.setBrushColor=function(a){this.brush.color=a;Drawmote.Mobile.Socket.changeBrush(this.brush)};Drawmote.Mobile.setBrushSize=function(a){this.brush.size=a;Drawmote.Mobile.Socket.changeBrush(this.brush)};
Drawmote.Mobile.setBrushMode=function(a){this.brush.mode=a;Drawmote.Mobile.Socket.changeBrushMode(a)};$(document).ready(function(){Drawmote.Mobile.init()});
